<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />


<meta name="author" content="Lindsay Coome" />


<title>Data visualization in R</title>

<script src="site_libs/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/lumen.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<script src="site_libs/jqueryui-1.11.4/jquery-ui.min.js"></script>
<link href="site_libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="site_libs/tocify-1.9.1/jquery.tocify.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<script src="site_libs/htmlwidgets-1.2/htmlwidgets.js"></script>
<script src="site_libs/plotly-binding-4.8.0/plotly.js"></script>
<script src="site_libs/typedarray-0.1/typedarray.min.js"></script>
<link href="site_libs/crosstalk-1.0.0/css/crosstalk.css" rel="stylesheet" />
<script src="site_libs/crosstalk-1.0.0/js/crosstalk.min.js"></script>
<link href="site_libs/plotly-htmlwidgets-css-1.39.2/plotly-htmlwidgets.css" rel="stylesheet" />
<script src="site_libs/plotly-main-1.39.2/plotly-latest.min.js"></script>
<link href="site_libs/font-awesome-5.1.0/css/all.css" rel="stylesheet" />
<link href="site_libs/font-awesome-5.1.0/css/v4-shims.css" rel="stylesheet" />
<link rel="icon" type="image/png" href="image/favicon.png">
<style type="text/css">

table {
    border-collapse: collapse;
}

thead {
    border-top: solid #DCDCDC;
    border-bottom: solid #DCDCDC;
}

tr.odd {
    background-color: #F8F8F8;
}

tr:last-child {
    border-bottom: solid #DCDCDC;
}

</style>


<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; position: absolute; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; }
pre.numberSource a.sourceLine:empty
  { position: absolute; }
pre.numberSource a.sourceLine::before
  { content: attr(data-line-number);
    position: absolute; left: -5em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; } /* Alert */
code span.an { color: #008000; } /* Annotation */
code span.at { } /* Attribute */
code span.bu { } /* BuiltIn */
code span.cf { color: #0000ff; } /* ControlFlow */
code span.ch { color: #008080; } /* Char */
code span.cn { } /* Constant */
code span.co { color: #008000; } /* Comment */
code span.cv { color: #008000; } /* CommentVar */
code span.do { color: #008000; } /* Documentation */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.im { } /* Import */
code span.in { color: #008000; } /* Information */
code span.kw { color: #0000ff; } /* Keyword */
code span.op { } /* Operator */
code span.ot { color: #ff4000; } /* Other */
code span.pp { color: #ff4000; } /* Preprocessor */
code span.sc { color: #008080; } /* SpecialChar */
code span.ss { color: #008080; } /* SpecialString */
code span.st { color: #008080; } /* String */
code span.va { } /* Variable */
code span.vs { color: #008080; } /* VerbatimString */
code span.wa { color: #008000; font-weight: bold; } /* Warning */


</style>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>


<style type="text/css">
h1 {
  font-size: 34px;
}
h1.title {
  font-size: 38px;
}
h2 {
  font-size: 30px;
}
h3 {
  font-size: 24px;
}
h4 {
  font-size: 18px;
}
h5 {
  font-size: 16px;
}
h6 {
  font-size: 12px;
}
.table th:not([align]) {
  text-align: left;
}
</style>


</head>

<body>

<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
  height: auto;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
</style>


<style type="text/css">
/* padding for bootstrap navbar */
body {
  padding-top: 54px;
  padding-bottom: 40px;
}
/* offset scroll position for anchor links (for fixed navbar)  */
.section h1 {
  padding-top: 59px;
  margin-top: -59px;
}
.section h2 {
  padding-top: 59px;
  margin-top: -59px;
}
.section h3 {
  padding-top: 59px;
  margin-top: -59px;
}
.section h4 {
  padding-top: 59px;
  margin-top: -59px;
}
.section h5 {
  padding-top: 59px;
  margin-top: -59px;
}
.section h6 {
  padding-top: 59px;
  margin-top: -59px;
}
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #ffffff;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script>
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.parent().addClass('active');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');
});
</script>

<div class="container-fluid main-container">

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  background: white;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open')
  });
});
</script>

<!-- code folding -->



<script>
$(document).ready(function ()  {

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2,h3,h4",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_').toLowerCase();
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = false;
    options.smoothScroll = false;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}


.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
  padding-left: 25px;
  text-indent: 0;
}

.tocify .list-group-item {
  border-radius: 0px;
}

.tocify-subheader {
  display: inline;
}
.tocify-subheader .tocify-item {
  font-size: 0.95em;
}

</style>

<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row-fluid">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">EEB313H1</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="index.html">
    <span class="fa fa-map-o"></span>
     
    Syllabus
  </a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    <span class="fa fa-book"></span>
     
    Lectures
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="lec01-introduction.html">Sept. 6: Intro to course, programming, RStudio, and R Markdown</a>
    </li>
    <li>
      <a href="lec02-basic-r.html">Sept. 11: Assignment, vectors, functions</a>
    </li>
    <li>
      <a href="lec03-basic-r.html">Sept. 13: Data frames, intro to dplyr</a>
    </li>
    <li>
      <a href="lec04-dplyr.html">Sept. 18: Data wrangling in dplyr, ggplot, tidy data</a>
    </li>
    <li>
      <a href="lec05-dplyr.html">Sept. 20: More dplyr and ggplot</a>
    </li>
    <li>
      <a href="lec06-exploratory-data-analysis.html">Sept. 25: Exploratory data analysis</a>
    </li>
    <li>
      <a href="lec07-linear-modelling.html">Sept. 27: Linear models and statistical modelling</a>
    </li>
    <li>
      <a href="lec08-linear-mixed-effects-models.html">Oct. 02: Mixed effects models</a>
    </li>
    <li>
      <a href="lec09-Randomization-tests.html">Oct. 04: Simulating data: Randomization tests</a>
    </li>
    <li class="dropdown-header">Oct. 09: Multivariate stats</li>
    <li class="dropdown-header">Oct. 11: Model selection</li>
    <li class="dropdown-header">Oct. 16: Numerically solving population models</li>
    <li class="dropdown-header">Oct. 18: Time series analysis</li>
    <li>
      <a href="lec12-datasets.html">Oct. 23: Datasets, hypothesis, begin projects</a>
    </li>
    <li>
      <a href="lec14-git.html">Oct. 25: Reproducible science</a>
    </li>
    <li>
      <a href="lec17-rmarkdown.html">Oct. 30: Reproducible science</a>
    </li>
    <li class="dropdown-header">Nov. 01: Project work (no lesson)</li>
    <li class="dropdown-header">Nov. 13: Project work (no lesson)</li>
    <li class="dropdown-header">Nov. 15: Project work (no lesson)</li>
    <li class="dropdown-header">Nov. 20: Project work (no lesson)</li>
    <li class="dropdown-header">Nov. 22: Project work (no lesson)</li>
    <li class="dropdown-header">Nov. 27: Project work (no lesson)</li>
    <li class="dropdown-header">Nov. 29: Project work (no lesson)</li>
    <li class="dropdown-header">Dec. 04: Project work (no lesson)</li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    <span class="fa fa-book"></span>
     
    Assignments
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="assignment-01.html">Assignment 1</a>
    </li>
    <li>
      <a href="assignment-02.html">Assignment 2</a>
    </li>
    <li>
      <a href="assignment-03.html">Assignment 3</a>
    </li>
    <li>
      <a href="assignment-04.html">Assignment 4</a>
    </li>
    <li class="dropdown-header">Assignment 5</li>
    <li class="dropdown-header">Assignment 6</li>
    <li class="dropdown-header">Assignment 7</li>
    <li class="dropdown-header">Assignment 8</li>
    <li class="dropdown-header">Final assignment</li>
  </ul>
</li>
<li>
  <a href="resources.html">
    <span class="fa fa-question"></span>
     
    Resources and FAQ
  </a>
</li>
<li>
  <a href="about.html">
    <span class="fa fa-info"></span>
     
    About
  </a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    <span class="fa fa-bars"></span>
     
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="mailto:ahmed.hasan@mail.utoronto.ca">
        <span class="fa fa-envelope"></span>
         
        Contact
      </a>
    </li>
    <li>
      <a href="https://github.com/uoftcoders/rcourse">
        <span class="fa fa-github"></span>
         
        GitHub
      </a>
    </li>
  </ul>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div class="fluid-row" id="header">



<h1 class="title toc-ignore">Data visualization in R</h1>
<h4 class="author"><em>Lindsay Coome</em></h4>

</div>


<div id="lesson-preamble" class="section level2">
<h2>Lesson preamble</h2>
<blockquote>
<h3 id="learning-objectives">Learning Objectives</h3>
<ul>
<li>Making better plots for outreach and communication.</li>
<li>Review how to produce scatter plots with trendlines using ggplot.</li>
<li>Advanced faceting and segmenting data.</li>
<li>Altering aesthetic features in ggplot.</li>
<li>Make bar and other graphs using ggplot.</li>
<li>Making interactive and quick graphs.</li>
<li>Saving graphs.</li>
</ul>
<h3 id="lesson-outline">Lesson outline</h3>
<ul>
<li>How to visualize data (20 min)</li>
<li>ggplot basics (10 min)</li>
<li>Basics and faceting (10 min)</li>
<li>Aesthetics and plot types (25 min)</li>
<li>Interactive and quick graphing (10 min)</li>
<li>Saving graphs (5 min)</li>
</ul>
<h3 id="setup">Setup</h3>
<ul>
<li>Make sure to install <code>plotly</code> (<code>install.packages(&quot;plotly&quot;)</code>).</li>
</ul>
</blockquote>
<hr />
</div>
<div id="making-good-graphs" class="section level2">
<h2>Making good graphs</h2>
<div id="what-makes-a-good-graph" class="section level3">
<h3>What makes a good graph?</h3>
<div id="challenge" class="section level4">
<h4>Challenge</h4>
<p>What makes a bad graph? What makes an ugly graph to you?</p>
</div>
</div>
<div id="components-of-a-graph-the-data" class="section level3">
<h3>Components of a graph: The data</h3>
<p>There are many considerations to take into account when creating a graph.</p>
<p>Data types:</p>
<ul>
<li>Nominal (labels without quantitative values)</li>
<li>Ordinal (the order of the values is what’s important, but the magnitude of difference between each value is not really known)</li>
<li>Interval (interval scales are numeric scales in which we know not only the order, but also the exact differences between the values)</li>
<li>Ratio (same properties as interval scales but with an absolute zero, e.g. height)</li>
</ul>
<p>And data features:</p>
<ul>
<li>Scalar (simple magnitude or quantity)</li>
<li>Vector (magnitude and direction)</li>
<li>Tensor (vectors + other attributes)</li>
</ul>
<p>Ask: “what kind of data/information is it?”</p>
<ul>
<li>What type?</li>
<li>Numerical?</li>
<li>Spatial?</li>
<li>How many dimensions?</li>
<li>Nominal/categorical?</li>
<li>Narrative?</li>
</ul>
</div>
<div id="tuftes-guidelines" class="section level3">
<h3>Tufte’s guidelines</h3>
<ul>
<li>Reduce non-data ink</li>
<li>Enhance the data ink</li>
</ul>
<p>Reduces the proportion of graphic’s ink devoted to the non-redundant display of data-information.</p>
<p>Avoid “chartjunk” - extraneous visual elements that detract from message.</p>
<table>
<thead>
<tr class="header">
<th>Visual Attribute</th>
<th>Non-Data</th>
<th>Data</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Line Thickness</td>
<td>Thin</td>
<td>Thick</td>
</tr>
<tr class="even">
<td>Size</td>
<td>Small</td>
<td>Big</td>
</tr>
<tr class="odd">
<td>Brightness Contrast</td>
<td>Decrease</td>
<td>Increase</td>
</tr>
<tr class="even">
<td>Colour Saturation</td>
<td>Decrease</td>
<td>Increase</td>
</tr>
</tbody>
</table>
<p><a href="https://www.edwardtufte.com/tufte/">More on Edward Tufte</a></p>
</div>
<div id="colour-rules" class="section level3">
<h3>Colour rules</h3>
<ul>
<li>Large background colours should be quiet, muted to let brighter colours stand out</li>
<li>To highlight some element of a figure, using a bright colour can be effective</li>
<li>However, if brightly colouring this aspect of your figure serves no purpose, leave it greyscale/plain</li>
<li>Here is a reference sheet with all the <a href="http://www.stat.columbia.edu/~tzheng/files/Rcolor.pdf">colours and colour names in R</a></li>
</ul>
</div>
<div id="summary" class="section level3">
<h3>Summary</h3>
<ul>
<li>Determine what type of data you have and how your data will be used</li>
<li>Determine how many variable types are in your data</li>
<li>Decide on a visual treatment for each of the variables</li>
<li>Focus on the data in your visual representation</li>
</ul>
</div>
<div id="more-general-resources-on-plotting" class="section level3">
<h3>More general resources on plotting</h3>
<ul>
<li><a href="https://journals.plos.org/ploscompbiol/article?id=10.1371/journal.pcbi.1003833">Ten Simple Rules for Better Figures</a></li>
<li><a href="https://blog.graphiq.com/finding-the-right-color-palettes-for-data-visualizations-fcd4e707a283">Finding the Right Color Palettes for Data Visualizations</a></li>
<li><a href="http://www.cookbook-r.com/Graphs/">Cookbook for R - Graphs</a></li>
<li><a href="https://www.rstudio.com/wp-content/uploads/2015/03/ggplot2-cheatsheet.pdf">ggplot cheatsheet - very useful!</a></li>
<li><a href="https://www.biostat.wisc.edu/~kbroman/topten_worstgraphs/">Examples of bad graphs</a></li>
<li><a href="https://www.stat.auckland.ac.nz/~ihaka/120/Lectures/lecture03.pdf">More examples of bad graphs and how to improve them</a></li>
<li><a href="https://en.wikipedia.org/wiki/Misleading_graph">Wikipedia has a great article on misleading graphs</a></li>
</ul>
</div>
</div>
<div id="what-is-ggplot" class="section level2">
<h2>What is ggplot?</h2>
<p>ggplot2 is inspired by the principles from the <a href="https://www.cs.uic.edu/~wilkinson/TheGrammarOfGraphics/GOG.html">Grammar of Graphics</a> and also named thereafter. The basic notion is that there is a grammar to the composition of graphical components in statistical graphics, and by directly controlling that grammar, you can generate a large set of carefully constructed graphics tailored to your particular needs. Each component is added to the plot as a layer.</p>
<div id="components-of-a-ggplot-plot" class="section level3">
<h3>Components of a ggplot plot</h3>
<p>Plots convey information through various aspects of their aesthetics. Some aesthetics that plots use are:</p>
<ul>
<li>x position</li>
<li>y position</li>
<li>size of elements</li>
<li>shape of elements</li>
<li>colour of elements</li>
</ul>
<p>The elements in a plot are geometric shapes, like</p>
<ul>
<li>points</li>
<li>lines</li>
<li>line segments</li>
<li>bars</li>
<li>text</li>
</ul>
<p>Some of these geometries have their own particular aesthetics. For instance:</p>
<p><strong>points</strong></p>
<ul>
<li>point shape</li>
<li>point size</li>
</ul>
<p><strong>lines</strong></p>
<ul>
<li>line type</li>
<li>line weight</li>
</ul>
<p><strong>bars</strong></p>
<ul>
<li>y minimum</li>
<li>y maximum</li>
<li>fill colour</li>
<li>outline colour</li>
</ul>
<p><strong>text</strong></p>
<ul>
<li>label value</li>
</ul>
</div>
<div id="setting-up" class="section level3">
<h3>Setting up</h3>
<p>Load or install the required packages:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" data-line-number="1"><span class="kw">library</span>(ggplot2)</a></code></pre></div>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" data-line-number="1"><span class="kw">install.packages</span>(<span class="st">&quot;plotly&quot;</span>)</a></code></pre></div>
</div>
<div id="lets-get-started" class="section level3">
<h3>Let’s get started!</h3>
<p>Here is an example of the base plotting functions in R:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" data-line-number="1"><span class="kw">plot</span>(cars)</a></code></pre></div>
<p><img src="lec15-data-viz_files/figure-html/cars-1.png" width="672" /></p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" data-line-number="1"><span class="kw">hist</span>(cars<span class="op">$</span>speed)</a></code></pre></div>
<p><img src="lec15-data-viz_files/figure-html/cars-2.png" width="672" /></p>
<p>You’ve already made a few basic plots in ggplot.</p>
<p>We’ll investigate the dataset we’re going to use to make some graphs….</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" data-line-number="1"><span class="kw">str</span>(iris)</a></code></pre></div>
<pre><code>## &#39;data.frame&#39;:    150 obs. of  5 variables:
##  $ Sepal.Length: num  5.1 4.9 4.7 4.6 5 5.4 4.6 5 4.4 4.9 ...
##  $ Sepal.Width : num  3.5 3 3.2 3.1 3.6 3.9 3.4 3.4 2.9 3.1 ...
##  $ Petal.Length: num  1.4 1.4 1.3 1.5 1.4 1.7 1.4 1.5 1.4 1.5 ...
##  $ Petal.Width : num  0.2 0.2 0.2 0.2 0.2 0.4 0.3 0.2 0.2 0.1 ...
##  $ Species     : Factor w/ 3 levels &quot;setosa&quot;,&quot;versicolor&quot;,..: 1 1 1 1 1 1 1 1 1 1 ...</code></pre>
<p>Recall:</p>
<ul>
<li>geom_point() for scatter plots, dot plots, etc.</li>
<li>geom_line() for trend lines, time-series, etc.</li>
<li>geom_histogram() for histograms</li>
</ul>
<p>Once we’ve defined the structure of our graph, we need to add a “layer” to it in order to define what type of graph it is. Let’s make a scatterplot:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb7-1" data-line-number="1"><span class="kw">ggplot</span>(iris, <span class="kw">aes</span>(<span class="dt">x =</span> Sepal.Width, <span class="dt">y =</span> Sepal.Length)) <span class="op">+</span></a>
<a class="sourceLine" id="cb7-2" data-line-number="2"><span class="st">  </span><span class="kw">geom_point</span>()</a></code></pre></div>
<p><img src="lec15-data-viz_files/figure-html/unnamed-chunk-5-1.png" width="672" /></p>
<p>You can also save the structure of the graph to a variable and then add layers and other attributes to it. Let’s do that:</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb8-1" data-line-number="1">g &lt;-<span class="st"> </span><span class="kw">ggplot</span>(iris, <span class="kw">aes</span>(<span class="dt">x =</span> Sepal.Width, <span class="dt">y =</span> Sepal.Length)) </a>
<a class="sourceLine" id="cb8-2" data-line-number="2">g <span class="op">+</span><span class="st"> </span><span class="kw">geom_point</span>()</a></code></pre></div>
<p><img src="lec15-data-viz_files/figure-html/unnamed-chunk-6-1.png" width="672" /></p>
<p>We can add other “layers” of graphs to our first graph. Let’s add a trend line to our scatterplot:</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb9-1" data-line-number="1">g <span class="op">+</span></a>
<a class="sourceLine" id="cb9-2" data-line-number="2"><span class="st">    </span><span class="kw">geom_point</span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb9-3" data-line-number="3"><span class="st">    </span><span class="kw">geom_smooth</span>() </a></code></pre></div>
<pre><code>## `geom_smooth()` using method = &#39;loess&#39; and formula &#39;y ~ x&#39;</code></pre>
<p><img src="lec15-data-viz_files/figure-html/unnamed-chunk-7-1.png" width="672" /></p>
<p>We can also “facet” our graphs, which means dividing a plot into subplots based on the values of one or more discrete variables.</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb11-1" data-line-number="1">g <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb11-2" data-line-number="2"><span class="st">    </span><span class="kw">geom_point</span>() <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb11-3" data-line-number="3"><span class="st">    </span><span class="kw">geom_smooth</span>() <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb11-4" data-line-number="4"><span class="st">    </span><span class="kw">facet_grid</span>(. <span class="op">~</span><span class="st"> </span>Species)</a></code></pre></div>
<pre><code>## `geom_smooth()` using method = &#39;loess&#39; and formula &#39;y ~ x&#39;</code></pre>
<p><img src="lec15-data-viz_files/figure-html/unnamed-chunk-8-1.png" width="672" /></p>
<p>There are lots of ways to organize your facet. See “faceting” at the bottom of <a href="https://www.rstudio.com/wp-content/uploads/2015/03/ggplot2-cheatsheet.pdf">ggplot cheatsheet</a>.</p>
<p>Let’s say we don’t want to facet, but we want to colour the dots depending on the species:</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb13-1" data-line-number="1"><span class="kw">ggplot</span>(iris, <span class="kw">aes</span>(<span class="dt">x =</span> Sepal.Width, <span class="dt">y =</span> Sepal.Length, <span class="dt">color =</span> Species)) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb13-2" data-line-number="2"><span class="st">    </span><span class="kw">geom_point</span>()</a></code></pre></div>
<p><img src="lec15-data-viz_files/figure-html/unnamed-chunk-9-1.png" width="672" /></p>
<p>We can change other aesthetic features of the graph. Let’s get rid of the colour aspect of our structure and change the colour and size of the points:</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb14-1" data-line-number="1"><span class="kw">ggplot</span>(iris, <span class="kw">aes</span>(<span class="dt">x =</span> Sepal.Width, <span class="dt">y =</span> Sepal.Length)) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb14-2" data-line-number="2"><span class="st">    </span><span class="kw">geom_point</span>(<span class="dt">color =</span> <span class="st">&quot;steelblue&quot;</span>, <span class="dt">size =</span> <span class="dv">4</span>)</a></code></pre></div>
<p><img src="lec15-data-viz_files/figure-html/unnamed-chunk-10-1.png" width="672" /></p>
<p>Going back to our graph coloured by species, what if we want to change other aspects, like the theme, or centre the title?</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb15-1" data-line-number="1"><span class="kw">ggplot</span>(iris, <span class="kw">aes</span>(<span class="dt">x =</span> Sepal.Width, <span class="dt">y =</span> Sepal.Length, <span class="dt">color =</span> Species)) <span class="op">+</span></a>
<a class="sourceLine" id="cb15-2" data-line-number="2"><span class="st">    </span><span class="kw">geom_point</span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb15-3" data-line-number="3"><span class="st">    </span><span class="kw">ylab</span>(<span class="st">&quot;Sepal Length&quot;</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb15-4" data-line-number="4"><span class="st">    </span><span class="kw">xlab</span>(<span class="st">&quot;Sepal Width&quot;</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb15-5" data-line-number="5"><span class="st">    </span><span class="kw">ggtitle</span>(<span class="st">&quot;Sepal Width by Sepal Length&quot;</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb15-6" data-line-number="6"><span class="st">    </span><span class="kw">theme_bw</span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb15-7" data-line-number="7"><span class="st">    </span><span class="kw">theme</span>(<span class="dt">plot.title =</span> <span class="kw">element_text</span>(<span class="dt">hjust =</span> <span class="fl">0.5</span>))</a></code></pre></div>
<p><img src="lec15-data-viz_files/figure-html/unnamed-chunk-11-1.png" width="672" /></p>
<p>What about changing the font? Let’s get rid of our preconfigured theme for a moment, which changes many aspects of the aesthetics at once. Let’s spend some time building our own theme…</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb16-1" data-line-number="1"><span class="kw">ggplot</span>(iris, <span class="kw">aes</span>(<span class="dt">x =</span> Sepal.Width, <span class="dt">y =</span> Sepal.Length, <span class="dt">color =</span> Species)) <span class="op">+</span></a>
<a class="sourceLine" id="cb16-2" data-line-number="2"><span class="st">    </span><span class="kw">geom_point</span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb16-3" data-line-number="3"><span class="st">    </span><span class="kw">ylab</span>(<span class="st">&quot;Sepal Length&quot;</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb16-4" data-line-number="4"><span class="st">    </span><span class="kw">xlab</span>(<span class="st">&quot;Sepal Width&quot;</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb16-5" data-line-number="5"><span class="st">    </span><span class="kw">ggtitle</span>(<span class="st">&quot;Sepal Width by Sepal Length&quot;</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb16-6" data-line-number="6"><span class="st">    </span><span class="kw">theme</span>(</a>
<a class="sourceLine" id="cb16-7" data-line-number="7">        <span class="dt">plot.title =</span> <span class="kw">element_text</span>(<span class="dt">hjust =</span> <span class="fl">0.5</span>),</a>
<a class="sourceLine" id="cb16-8" data-line-number="8">        <span class="dt">text =</span> <span class="kw">element_text</span>(<span class="dt">size =</span> <span class="dv">8</span>, <span class="dt">family =</span> <span class="st">&#39;Times&#39;</span>),</a>
<a class="sourceLine" id="cb16-9" data-line-number="9">        <span class="dt">legend.title =</span> <span class="kw">element_blank</span>()</a>
<a class="sourceLine" id="cb16-10" data-line-number="10">        )</a></code></pre></div>
<p><img src="lec15-data-viz_files/figure-html/unnamed-chunk-12-1.png" width="672" /></p>
<p>You can add your own alterations to themes. For example, here is an APA theme built on top of the base theme_bw(). Themes can be saved into variables so they don’t need to be typed out every time you use a graph.</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb17-1" data-line-number="1">apatheme &lt;-<span class="st"> </span><span class="cf">function</span>() {</a>
<a class="sourceLine" id="cb17-2" data-line-number="2">    <span class="kw">theme_bw</span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb17-3" data-line-number="3"><span class="st">        </span><span class="kw">theme</span>(</a>
<a class="sourceLine" id="cb17-4" data-line-number="4">            <span class="dt">panel.grid.major =</span> <span class="kw">element_blank</span>(),</a>
<a class="sourceLine" id="cb17-5" data-line-number="5">            <span class="dt">panel.grid.minor =</span> <span class="kw">element_blank</span>(),</a>
<a class="sourceLine" id="cb17-6" data-line-number="6">            <span class="dt">panel.border =</span> <span class="kw">element_blank</span>(),</a>
<a class="sourceLine" id="cb17-7" data-line-number="7">            <span class="dt">axis.line =</span> <span class="kw">element_line</span>(),</a>
<a class="sourceLine" id="cb17-8" data-line-number="8">            <span class="dt">text =</span> <span class="kw">element_text</span>(<span class="dt">family =</span> <span class="st">&#39;Times&#39;</span>),</a>
<a class="sourceLine" id="cb17-9" data-line-number="9">            <span class="dt">legend.title =</span> <span class="kw">element_blank</span>()</a>
<a class="sourceLine" id="cb17-10" data-line-number="10">        )</a>
<a class="sourceLine" id="cb17-11" data-line-number="11">}</a>
<a class="sourceLine" id="cb17-12" data-line-number="12"></a>
<a class="sourceLine" id="cb17-13" data-line-number="13"><span class="kw">ggplot</span>(iris, <span class="kw">aes</span>(<span class="dt">x =</span> Sepal.Width, <span class="dt">y =</span> Sepal.Length, <span class="dt">color =</span> Species)) <span class="op">+</span></a>
<a class="sourceLine" id="cb17-14" data-line-number="14"><span class="st">    </span><span class="kw">geom_point</span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb17-15" data-line-number="15"><span class="st">    </span><span class="kw">ylab</span>(<span class="st">&quot;Sepal Length&quot;</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb17-16" data-line-number="16"><span class="st">    </span><span class="kw">xlab</span>(<span class="st">&quot;Sepal Width&quot;</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb17-17" data-line-number="17"><span class="st">    </span><span class="kw">ggtitle</span>(<span class="st">&quot;Sepal Width by Sepal Length&quot;</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb17-18" data-line-number="18"><span class="st">    </span><span class="kw">apatheme</span>()</a></code></pre></div>
<p><img src="lec15-data-viz_files/figure-html/unnamed-chunk-13-1.png" width="672" /></p>
<p>This is a <a href="https://ggplot2.tidyverse.org/reference/theme.html">resource</a> on which parts of the plot are controlled by different theme parameters when and if you create your own theme.</p>
</div>
<div id="bar-graphs" class="section level3">
<h3>Bar graphs</h3>
<p>What if we want a bar graph of Sepal Length by Species?</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb18-1" data-line-number="1"><span class="kw">ggplot</span>(iris, <span class="kw">aes</span>(<span class="dt">x =</span> Species, <span class="dt">y =</span> Sepal.Length)) <span class="op">+</span></a>
<a class="sourceLine" id="cb18-2" data-line-number="2"><span class="st">    </span><span class="kw">geom_bar</span>(<span class="dt">stat=</span><span class="st">&#39;summary&#39;</span>, <span class="dt">fun.y=</span><span class="st">&#39;mean&#39;</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb18-3" data-line-number="3"><span class="st">    </span><span class="kw">ylab</span>(<span class="st">&quot;Sepal Length&quot;</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb18-4" data-line-number="4"><span class="st">    </span><span class="kw">xlab</span>(<span class="st">&quot;Species&quot;</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb18-5" data-line-number="5"><span class="st">    </span><span class="kw">ggtitle</span>(<span class="st">&quot;Sepal Length by Species&quot;</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb18-6" data-line-number="6"><span class="st">    </span><span class="kw">theme_bw</span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb18-7" data-line-number="7"><span class="st">    </span><span class="kw">theme</span>(<span class="dt">plot.title =</span> <span class="kw">element_text</span>(<span class="dt">hjust =</span> <span class="fl">0.5</span>))</a></code></pre></div>
<p><img src="lec15-data-viz_files/figure-html/unnamed-chunk-14-1.png" width="672" /></p>
<p>As you can see, it is a bit cumbersome to create barplots of means with ggplot (you need to add <code>stat='summary', fun.y='mean'</code>). The default behaviour of <code>geom_bar</code> is to count observations instead of summarize them, which actually is a more appropriate use of a barplot for reasons that we will cover below.</p>
</div>
<div id="violin-plots" class="section level3">
<h3>Violin plots</h3>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb19-1" data-line-number="1"><span class="kw">ggplot</span>(iris, <span class="kw">aes</span>(<span class="dt">x =</span> Species, <span class="dt">y =</span> Sepal.Length)) <span class="op">+</span></a>
<a class="sourceLine" id="cb19-2" data-line-number="2"><span class="st">    </span><span class="kw">geom_violin</span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb19-3" data-line-number="3"><span class="st">    </span><span class="kw">ylab</span>(<span class="st">&quot;Sepal Length&quot;</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb19-4" data-line-number="4"><span class="st">    </span><span class="kw">xlab</span>(<span class="st">&quot;Species&quot;</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb19-5" data-line-number="5"><span class="st">    </span><span class="kw">ggtitle</span>(<span class="st">&quot;Sepal Length by Species&quot;</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb19-6" data-line-number="6"><span class="st">    </span><span class="kw">theme_bw</span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb19-7" data-line-number="7"><span class="st">    </span><span class="kw">theme</span>(<span class="dt">plot.title =</span> <span class="kw">element_text</span>(<span class="dt">hjust =</span> <span class="fl">0.5</span>))</a></code></pre></div>
<p><img src="lec15-data-viz_files/figure-html/unnamed-chunk-15-1.png" width="672" /></p>
</div>
<div id="box-plots" class="section level3">
<h3>Box plots</h3>
<p>We can use boxplots to visualize the distribution Sepal Length within each species:</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb20-1" data-line-number="1"><span class="kw">ggplot</span>(<span class="dt">data =</span> iris, <span class="kw">aes</span>(<span class="dt">x =</span> Species, <span class="dt">y =</span> Sepal.Length)) <span class="op">+</span></a>
<a class="sourceLine" id="cb20-2" data-line-number="2"><span class="st">    </span><span class="kw">geom_boxplot</span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb20-3" data-line-number="3"><span class="st">    </span><span class="kw">ylab</span>(<span class="st">&quot;Sepal Length&quot;</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb20-4" data-line-number="4"><span class="st">    </span><span class="kw">xlab</span>(<span class="st">&quot;Species&quot;</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb20-5" data-line-number="5"><span class="st">    </span><span class="kw">ggtitle</span>(<span class="st">&quot;Sepal Length by Species&quot;</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb20-6" data-line-number="6"><span class="st">    </span><span class="kw">theme_bw</span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb20-7" data-line-number="7"><span class="st">    </span><span class="kw">theme</span>(<span class="dt">plot.title =</span> <span class="kw">element_text</span>(<span class="dt">hjust =</span> <span class="fl">0.5</span>))</a></code></pre></div>
<p><img src="lec15-data-viz_files/figure-html/boxplot-1.png" width="672" /></p>
<div id="challenge-1" class="section level4">
<h4>Challenge</h4>
<p>Out of the barplot, boxplot and violinplot, which one do you think is the most informative and why? Which is the most true to the underlying data and how would you know this?</p>
</div>
</div>
<div id="pros-and-cons-of-different-graph-types" class="section level3">
<h3>Pros and cons of different graph types</h3>
<p>We will deepen the discussion around some of these ideas, in the context of the following plot:</p>
<div class="figure">
<img src="image/dynamite-bars.png" alt="*Reproduced with permission from Dr. Koyama’s poster*" />
<p class="caption">*Reproduced with permission from <a href="http://biostat.mc.vanderbilt.edu/wiki/pub/Main/TatsukiKoyama/Poster3.pdf">Dr. Koyama’s poster*</a></p>
</div>
<p>Similar to the ideas of Tufte, it is generally advisable to avoid “decorative” plot elements that do not convey extra information about the data, <em>especially</em> when such elements hide the real data. For example, in the rectangles that make up these bars, the only relevant information is given by the where the rectangles ends on the y-axis, the rest of it is unnecessary and you could just have used a marker (circle, square, etc) to indicate the height on the y-axis instead. Note that the body of the rectangle is not representative for where the data lies, there are probably no data points close to 0, and several above the rectangle.</p>
<p>Barplots are especially misleading when used as data summaries, as in the example above. In a summary plot, only two distribution parameters (a measure of central tendency, e.g. the mean, and error, e.g. the standard deviation or a confidence interval) are displayed, instead of showing all the individual data points. This can be highly misleading, since different underlying distributions can give rise to the same summary plot just as when we previously discussed that the different distributions from the <code>datasaurus</code> R-package can give rise to <a href="https://uoftcoders.github.io/rcourse/lec11-modelling.html#challenge17">the same linear regression coefficients</a>. We also have no idea of how many observations there are in each group. These shortcomings become evident when comparing the barplot to the underlying distributions that were used to create them:</p>
<div class="figure">
<img src="image/dynamite-vs-dists.png" alt="*Reproduced with permission from Dr. Koyama’s poster*" />
<p class="caption">*Reproduced with permission from <a href="http://biostat.mc.vanderbilt.edu/wiki/pub/Main/TatsukiKoyama/Poster3.pdf">Dr. Koyama’s poster*</a></p>
</div>
<p>Immediately, you can see that conclusions drawn from the barplot, such that A and B have the same outcome, are factually incorrect. The distribution in D is bimodal, so representing that with a mean would be like observing black and white birds and conclude that the average bird colour is grey, it’s nonsensical. If we would have planned our follow up experiments based on the barplot alone, we would have been setting ourselves up for failure! Always be sceptical when you see a barplot in a published paper, and think of how the underlying distribution might look (note that barplots are more acceptable when used to represents counts, proportion or percentages, where there is only one data point per group in the data set).</p>
<p>Boxplots and violin plots are more meaningful data summaries as they represent more than just two distribution parameters. However, these can still be misleading and it is often the most appropriate to show each individual observation with a dot/hive/swarm plot, possibly combined with with a superimposed summary plot or a marker for the mean or median <em>if</em> you think this conveys additional information. One exception, when it is not advisable to show all data points, is when your data set is gigantic and plotting each individual observation would oversaturate the chart. Here, you are forced to show summary plots or a 2D histogram.</p>
<p>Here is an example of how you can plot a boxplot, together with the individual observations:</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb21-1" data-line-number="1"><span class="kw">ggplot</span>(<span class="dt">data =</span> iris, <span class="kw">aes</span>(<span class="dt">x =</span> Species, <span class="dt">y =</span> Sepal.Length)) <span class="op">+</span></a>
<a class="sourceLine" id="cb21-2" data-line-number="2"><span class="st">    </span><span class="kw">geom_boxplot</span>(<span class="dt">alpha =</span> <span class="dv">0</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb21-3" data-line-number="3"><span class="st">    </span><span class="kw">geom_jitter</span>(<span class="dt">alpha =</span> <span class="fl">0.3</span>, <span class="dt">color =</span> <span class="st">&quot;tomato&quot;</span>)</a></code></pre></div>
<p><img src="lec15-data-viz_files/figure-html/boxplot-with-points-1.png" width="672" /></p>
<p>Notice how the boxplot layer is behind the jitter layer? What do you need to change in the code to put the boxplot in front of the points such that it’s not hidden?</p>
<div id="challenge-2" class="section level4">
<h4>Challenge</h4>
<p>So far, we’ve looked at the distribution of sepal length within species. Try making a new plot to explore the distribution of another variable within each species.</p>
<p>What about making interactive graphs in R? There is a package called plotly that lets us make our ggplot2 graphs interactive:</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb22-1" data-line-number="1"><span class="kw">library</span>(plotly)</a></code></pre></div>
<pre><code>## 
## Attaching package: &#39;plotly&#39;</code></pre>
<pre><code>## The following object is masked from &#39;package:ggplot2&#39;:
## 
##     last_plot</code></pre>
<pre><code>## The following object is masked from &#39;package:stats&#39;:
## 
##     filter</code></pre>
<pre><code>## The following object is masked from &#39;package:graphics&#39;:
## 
##     layout</code></pre>
<div class="sourceCode" id="cb27"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb27-1" data-line-number="1">g &lt;-<span class="st"> </span><span class="kw">ggplot</span>(iris, <span class="kw">aes</span>(<span class="dt">x =</span> Species, <span class="dt">y =</span> Sepal.Length)) <span class="op">+</span></a>
<a class="sourceLine" id="cb27-2" data-line-number="2"><span class="st">    </span><span class="kw">geom_bar</span>(<span class="dt">stat=</span><span class="st">&#39;summary&#39;</span>, <span class="dt">fun.y=</span><span class="st">&#39;mean&#39;</span>)</a>
<a class="sourceLine" id="cb27-3" data-line-number="3">p &lt;-<span class="st"> </span><span class="kw">ggplotly</span>(g)</a>
<a class="sourceLine" id="cb27-4" data-line-number="4">p</a></code></pre></div>
<div id="htmlwidget-76bbacf7d62027515c37" style="width:672px;height:480px;" class="plotly html-widget"></div>
<script type="application/json" data-for="htmlwidget-76bbacf7d62027515c37">{"x":{"data":[{"orientation":"v","width":[0.9,0.9,0.9],"base":[0,0,0],"x":[1,2,3],"y":[5.006,5.936,6.588],"text":["Species: setosa<br />Sepal.Length: 5.006","Species: versicolor<br />Sepal.Length: 5.936","Species: virginica<br />Sepal.Length: 6.588"],"type":"bar","marker":{"autocolorscale":false,"color":"rgba(89,89,89,1)","line":{"width":1.88976377952756,"color":"transparent"}},"showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null}],"layout":{"margin":{"t":26.2283105022831,"r":7.30593607305936,"b":40.1826484018265,"l":31.4155251141553},"plot_bgcolor":"rgba(235,235,235,1)","paper_bgcolor":"rgba(255,255,255,1)","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187},"xaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[0.4,3.6],"tickmode":"array","ticktext":["setosa","versicolor","virginica"],"tickvals":[1,2,3],"categoryorder":"array","categoryarray":["setosa","versicolor","virginica"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.65296803652968,"tickwidth":0.66417600664176,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716895},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(255,255,255,1)","gridwidth":0.66417600664176,"zeroline":false,"anchor":"y","title":"Species","titlefont":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187},"hoverformat":".2f"},"yaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[-0.3294,6.9174],"tickmode":"array","ticktext":["0","2","4","6"],"tickvals":[0,2,4,6],"categoryorder":"array","categoryarray":["0","2","4","6"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.65296803652968,"tickwidth":0.66417600664176,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716895},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(255,255,255,1)","gridwidth":0.66417600664176,"zeroline":false,"anchor":"x","title":"Sepal.Length","titlefont":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187},"hoverformat":".2f"},"shapes":[{"type":"rect","fillcolor":null,"line":{"color":null,"width":0,"linetype":[]},"yref":"paper","xref":"paper","x0":0,"x1":1,"y0":0,"y1":1}],"showlegend":false,"legend":{"bgcolor":"rgba(255,255,255,1)","bordercolor":"transparent","borderwidth":1.88976377952756,"font":{"color":"rgba(0,0,0,1)","family":"","size":11.689497716895}},"hovermode":"closest","barmode":"relative"},"config":{"doubleClick":"reset","modeBarButtonsToAdd":[{"name":"Collaborate","icon":{"width":1000,"ascent":500,"descent":-50,"path":"M487 375c7-10 9-23 5-36l-79-259c-3-12-11-23-22-31-11-8-22-12-35-12l-263 0c-15 0-29 5-43 15-13 10-23 23-28 37-5 13-5 25-1 37 0 0 0 3 1 7 1 5 1 8 1 11 0 2 0 4-1 6 0 3-1 5-1 6 1 2 2 4 3 6 1 2 2 4 4 6 2 3 4 5 5 7 5 7 9 16 13 26 4 10 7 19 9 26 0 2 0 5 0 9-1 4-1 6 0 8 0 2 2 5 4 8 3 3 5 5 5 7 4 6 8 15 12 26 4 11 7 19 7 26 1 1 0 4 0 9-1 4-1 7 0 8 1 2 3 5 6 8 4 4 6 6 6 7 4 5 8 13 13 24 4 11 7 20 7 28 1 1 0 4 0 7-1 3-1 6-1 7 0 2 1 4 3 6 1 1 3 4 5 6 2 3 3 5 5 6 1 2 3 5 4 9 2 3 3 7 5 10 1 3 2 6 4 10 2 4 4 7 6 9 2 3 4 5 7 7 3 2 7 3 11 3 3 0 8 0 13-1l0-1c7 2 12 2 14 2l218 0c14 0 25-5 32-16 8-10 10-23 6-37l-79-259c-7-22-13-37-20-43-7-7-19-10-37-10l-248 0c-5 0-9-2-11-5-2-3-2-7 0-12 4-13 18-20 41-20l264 0c5 0 10 2 16 5 5 3 8 6 10 11l85 282c2 5 2 10 2 17 7-3 13-7 17-13z m-304 0c-1-3-1-5 0-7 1-1 3-2 6-2l174 0c2 0 4 1 7 2 2 2 4 4 5 7l6 18c0 3 0 5-1 7-1 1-3 2-6 2l-173 0c-3 0-5-1-8-2-2-2-4-4-4-7z m-24-73c-1-3-1-5 0-7 2-2 3-2 6-2l174 0c2 0 5 0 7 2 3 2 4 4 5 7l6 18c1 2 0 5-1 6-1 2-3 3-5 3l-174 0c-3 0-5-1-7-3-3-1-4-4-5-6z"},"click":"function(gd) { \n        // is this being viewed in RStudio?\n        if (location.search == '?viewer_pane=1') {\n          alert('To learn about plotly for collaboration, visit:\\n https://cpsievert.github.io/plotly_book/plot-ly-for-collaboration.html');\n        } else {\n          window.open('https://cpsievert.github.io/plotly_book/plot-ly-for-collaboration.html', '_blank');\n        }\n      }"}],"cloud":false},"source":"A","attrs":{"2e792f3f51d3":{"x":{},"y":{},"type":"bar"}},"cur_data":"2e792f3f51d3","visdat":{"2e792f3f51d3":["function (y) ","x"]},"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"base_url":"https://plot.ly"},"evals":["config.modeBarButtonsToAdd.0.click"],"jsHooks":[]}</script>
</div>
<div id="challenge-3" class="section level4">
<h4>Challenge</h4>
<p>Create another type of interactive graph (i.e. not a bar graph) using these data. What kinds of graphs might interactivity add or improve the communication and clarity of your message to?</p>
</div>
</div>
<div id="more-resources-on-ggplot2" class="section level3">
<h3>More resources on ggplot2</h3>
<ul>
<li><a href="http://had.co.nz/ggplot2/">ggplot2 documentation</a></li>
<li><a href="https://www.amazon.com/ggplot2-Elegant-Graphics-Data-Analysis/dp/0387981403">Book by Hadley Wickham</a></li>
<li><a href="https://www.rstudio.com/wp-content/uploads/2015/03/ggplot2-cheatsheet.pdf">ggplot2 cheat sheet</a></li>
<li><a href="https://www.r-graph-gallery.com/all-graphs/">R graph gallery for inspiration (not just limited to ggplot2 graphs)</a></li>
</ul>
<p><em>Parts of this lesson material were taken and modified from <a href="https://software-carpentry.org">Software Carpentry</a> under their CC-BY copyright license. See their <a href="https://swcarpentry.github.io/r-novice-gapminder/08-plot-ggplot2/">lesson page</a> for the original source.</em></p>
</div>
</div>


<hr>

<p>This work is licensed under a <a href="https://creativecommons.org/licenses/by/4.0/">Creative Commons Attribution 4.0 International License</a>. See the <a href="LICENSE.html">licensing</a> page for more details about copyright information.</p>


</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
